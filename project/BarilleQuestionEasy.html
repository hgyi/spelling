<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>BRAILLE</title>

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
</head>

<body style="background-color: #ffc299">
    <div><span id="demo-area-01-show">123</span></div>
	<p id="word" style="margin-top: 250px;width: 100%;text-align:center;font-size: 56px;font-weight: 600;color:white"></p>
    <div id="BarilleQuestionEasy_Btn_Next" class="text-center">
        <img src="img/BarilleQuestionEasy_Btn_Next.png" class="rounded" style="margin-top: 150px;width:  70%;">
    </div>
    <div id="BarilleQuestionEasy_Btn_End" class="text-center">
        <img src="img/BarilleQuestionEasy_Btn_End.png" class="rounded" style="margin-top: 20px;width:  70%;">
    </div>
	<audio id="audioPlay" src="" hidden></audio> 
	
    <!-- jQuery -->
    <script src="vendor/jquery/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <!-- Plugin JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>
	<!-- google api -->
    <script src="http://www.google.com/jsapi"></script>
    <!-- webduino api -->
    <script src="http://blockly.webduino.io/components/webduino-js/dist/webduino-all.min.js"></script>
    <script src="http://blockly.webduino.io/lib/webduino-blockly.js"></script>
    <script src="http://blockly.webduino.io/lib/runtime.min.js"></script> 
    
	<script>
		//計算正確數字以及目前多少題目
        var rfid;
		var questionCount = 1;
		var answerCorectCount = 0;
		
		var word = document.getElementById("word");
		var audio = document.getElementById("audioPlay");

		var randWord =  ["Apple","Banana","Cat","Dog","Egg","Foxy"];
		var answerWord = randWord[Math.floor((Math.random() * 5))];

		word.innerHTML = answerWord;
		audio.src = "http://translate.google.com/translate_tts?ie=UTF-8&total=2&idx=0&textlen=32&client=tw-ob&q=" + answerWord + "&tl=en-gb"
		audio.play();
		
		var inputText = "";
	
        //Webduino reading rfid
        boardReady({board: 'Smart', device: '10QmRmEd', transport: 'mqtt'}, function (board) {
            board.systemReset();
            board.samplingInterval = 50;
            rfid = getRFID(board);
            rfid.read();
            rfid.on("enter",function(_uid){
                rfid._uid = _uid;
                if(rfid._uid == '04553A7AF54880'){
                    //document.getElementById("demo-area-01-show").innerHTML = 'A';
                    userAnswerWordAndRepeat('A');
                }
                if(rfid._uid == '046B7B7AF54881'){
                    //document.getElementById("demo-area-01-show").innerHTML = 'P';
                    userAnswerWordAndRepeat('P');
                }
                if(rfid._uid == '04DB261AF54880'){
                    //document.getElementById("demo-area-01-show").innerHTML = 'L';
                    userAnswerWordAndRepeat('L');
                }
                if(rfid._uid == '0485677AF54881'){
                    //document.getElementById("demo-area-01-show").innerHTML = 'E';
                    userAnswerWordAndRepeat('E');
                }
                //document.getElementById("demo-area-01-show").innerHTML = inputText;
            });
        });

		//Next Button
		var nextBtn = document.getElementById("BarilleQuestionEasy_Btn_Next");
		nextBtn.addEventListener("click",function(){
			if (answerWord.toUpperCase() === inputText){
                answerWord = randWord[Math.floor((Math.random() * 5))];
                word.innerHTML = answerWord;
                audio.src = "http://translate.google.com/translate_tts?ie=UTF-8&total=2&idx=0&textlen=32&client=tw-ob&q=Excellent Next " + answerWord + "&tl=en-gb"
                audio.play();
            
                questionCount++;
			} else {
                audio.src = "http://translate.google.com/translate_tts?ie=UTF-8&total=2&idx=0&textlen=32&client=tw-ob&q=No Correct Please try again&tl=en-gb"
			    audio.play();
            }
            inputText = '';
		},false);		
		
		function userAnswerWordAndRepeat(word)
        {
            inputText += word;
            audio.src = "http://translate.google.com/translate_tts?ie=UTF-8&total=2&idx=0&textlen=32&client=tw-ob&q=" + word + "&tl=en-gb"
            audio.play();
        }
        

		/*
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyD543SM0Hz4TZUJfi2rGj4isE0ysSiintE",
            authDomain: "spelling-5b9a1.firebaseapp.com",
            databaseURL: "https://spelling-5b9a1.firebaseio.com/",
            projectId: "spelling-5b9a1",
            storageBucket: "spelling-5b9a1.appspot.com",
            messagingSenderId: "249319314175"
        };
        firebase.initializeApp(config);
        var database = firebase.database();   

        //取得登入資訊
        var loginUser;
        var jsonObj = [];
        var count = 0;
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            loginUser = user;
            console.log("User is logined", user);
            
          } else {
            loginUser = null;
            alert("User is not logined yet.");
            window.location = "./signIn.html"
          }
        }); 
		*/
	</script>	
</body>

</html>
